
@model logisticTracker.Web.ViewModels.TripListingViewModels
@{
	ViewBag.Title = "Index";
}

<h2>Index</h2>
<div id="listingArea">


	<table>
		<thead>
			<tr>
				<th>Vehicle No</th>
				<th>LoadingDate</th>
				<th>Karachi Rent</th>
				<th>Trip Details</th>
				<th>Weight in Tons</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			@foreach (var trip in Model.Trips)
			{
			<tr>
				<td>@trip.VehicleNo</td>
				<td>@trip.loadingDate</td>
				<td>@trip.KarachiRent</td>
				<td>@trip.Details</td>
				<td>@trip.Weight</td>
				<td>
					<button class="editButton" data-id="@trip.ID">Edit</button>
					<button class="deleteButton" data-id="@trip.ID">Delete</button>
				</td>
			</tr>
			}

		</tbody>
	</table>
</div>

<div id="contentArea"></div>
<button type="button" id="createButton"> Create new Trip</button>

<script>

		$("#createButton").click(function () {
			$.ajax({
				url: "@Url.Action("Create", "Trips")",
				type: "get"
			}).done(function (response) {

				$("#contentArea").html(response);
			});
		});
		$(".editButton").click(function () {
			$.ajax({
				url: "@Url.Action("Edit", "Trips")",
				type: "get",
				data: {
					ID: $(this).attr("data-id")
				}
			}).done(function (response) {

				$("#contentArea").html(response);
			});
		});
	    $(".deleteButton").click(function () {
			var result = confirm("Are you sure you want to delete this record !");

			if (result == true) {
				$.ajax({
					url: "@Url.Action("Delete", "Trips")",
					type: "post",
					data: {
						ID: $(this).attr("data-id")
					}
				}).done(function (response) {

					$("#listingArea").html(response);
				});
			}
		});
</script>


